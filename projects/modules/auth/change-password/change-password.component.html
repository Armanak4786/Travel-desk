<div
  class="changePassword"
  [ngStyle]="{ 'background-image': 'url(assets/images/auth-background1.png)' }"
>
  <div class="flex justify-content-end align-items-center h-screen pr-6">
    <div class="parent-container h-auto p-fluid passwordcontainer">
      <gen-card
        [cardType]="'non-border'"
        [cardBgColor]="'--background-color-transparent-dark'"
      >
        <ng-container body>
          <div class="p-4 p-float-label text-lg font-semibold text-white">
            Change Password
          </div>

          <!-- Password Rules Section -->
          <div class="p-4 text-sm rules">
            <div class="flex items-start">
              <i class="pi pi-info-circle text-blue-500 mt-1 mr-2"></i>
              <div>
                <p class="mb-2">
                  This page allows you to update your password.<br>
                  The following rules apply when changing passwords:
                </p>
                <ul class="list-none pl-0 ruleslist space-y-2">
                  <li>The new password must contain at least 8 characters.</li>
                  <li>The new password must meet the defined password criteria.</li>
                  <li>The new password cannot contain the same 3 character(s) from previously used password.</li>
                  <li>The new password must be different from the last 10 previously created passwords.</li>
                  <li>The new password cannot contain your Login Name, in forward or reverse order.</li>
                  <li>The new password cannot contain your first, middle, or last name, in forward or reverse order.</li>
                </ul>
              </div>
            </div>
          </div>

          <form [formGroup]="changePasswordForm">
            <ng-container>
              <div class="p-4">
                <span class="p-float-label">
                  <input
                    type="password"
                    pInputText
                    formControlName="currentPassword"
                  />
                  <label class="text-white">Current Password</label>
                  <div
                    *ngIf="
                      changePasswordForm.get('currentPassword').touched &&
                      changePasswordForm.get('currentPassword').invalid
                    "
                    class="text-red-500 text-sm"
                  >
                    Current Password is required.
                  </div>
                </span>
              </div>

              <div class="p-4">
                <span class="p-float-label">
                  <input
                    type="password"
                    pInputText
                    formControlName="newPassword"
                  />
                  <label class="text-white">New Password</label>
                  <div
                    *ngIf="
                      changePasswordForm.get('newPassword').touched &&
                      changePasswordForm.get('newPassword').invalid
                    "
                    class="text-red-500 text-sm"
                  >
                    <small *ngIf="changePasswordForm.get('newPassword')?.errors?.required">
                      New Password is required.
                    </small>
                    <small *ngIf="changePasswordForm.get('newPassword')?.errors?.minlength">
                      Minimum 8 characters required.
                    </small>
                    <small *ngIf="changePasswordForm.get('newPassword')?.errors?.pattern">
                      Must include 1 uppercase, 1 lowercase, 1 number, 1 special character.
                    </small>
                    <small *ngIf="changePasswordForm.get('newPassword')?.errors?.previousChars">
                      Cannot contain same 3 characters from previous password.
                    </small>
                    <small *ngIf="changePasswordForm.get('newPassword')?.errors?.previousPasswords">
                      Must be different from last 10 passwords.
                    </small>
                    <small *ngIf="changePasswordForm.get('newPassword')?.errors?.loginName">
                      Cannot contain your login name.
                    </small>
                    <small *ngIf="changePasswordForm.get('newPassword')?.errors?.personalName">
                      Cannot contain your first, middle, or last name.
                    </small>
                  </div>
                </span>
              </div>

              <div class="p-4">
                <span class="p-float-label">
                  <input
                    type="password"
                    pInputText
                    formControlName="confirmPassword"
                  />
                  <label class="text-white">Confirm New Password</label>
                  <div
                    *ngIf="
                      changePasswordForm.get('confirmPassword')?.invalid &&
                      (changePasswordForm.get('confirmPassword')?.touched ||
                        changePasswordForm.get('confirmPassword')?.dirty)
                    "
                    class="text-red-500 text-sm"
                  >
                    <small
                      *ngIf="changePasswordForm.get('confirmPassword')?.errors?.required"
                    >
                      Confirm Password is required.
                    </small>
                    <small
                      *ngIf="changePasswordForm.get('confirmPassword')?.errors?.passwordMismatch"
                    >
                      The new password does not match the confirmed password.
                    </small>
                  </div>
                </span>
              </div>
            </ng-container>
          </form>

          <div class="flex justify-content-center gap-3 p-4">
            <gen-button
              [btnType]="'border-btn'"
              [btnColor]="'danger'"
              [btnLabel]="'Cancel'"
              (onClick)="backToLogin()"
            ></gen-button>
            <gen-button
              [btnLabel]="'Proceed'"
              (onClick)="changedSavePassword()"
            ></gen-button>
          </div>
        </ng-container>
      </gen-card>
    </div>
  </div>
</div>
